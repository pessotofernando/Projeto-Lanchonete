unit U_Cardapio;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Data.DB, Vcl.StdCtrls, System.ImageList,
  Vcl.ImgList, Vcl.Menus, Vcl.AppEvnts, Vcl.ExtCtrls, Vcl.Grids, Vcl.DBGrids;

type
  TFr_Cardapio = class(TForm)
    GroupBox1: TGroupBox;
    GroupBox2: TGroupBox;
    DBGrid1: TDBGrid;
    GroupBox3: TGroupBox;
    DBGrid2: TDBGrid;
    GroupBox4: TGroupBox;
    Image1: TImage;
    DS_LANCHES_SP_CON: TDataSource;
    ApplicationEvents1: TApplicationEvents;
    LANCHEINGR_SP_SEL: TDataSource;
    OpenDialog1: TOpenDialog;
    valor: TEdit;
    Label1: TLabel;
    GroupBox5: TGroupBox;
    Image2: TImage;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    procedure CARDAPIO_LIMPA;

    procedure LANCHES_SP_CON;
    procedure LANCHES_LER;
  end;

var
  Fr_Cardapio: TFr_Cardapio;

implementation

uses u_module;

{$R *.dfm}

procedure TFr_Cardapio.FormCreate(Sender: TObject);
begin
   CARDAPIO_LIMPA;

   MODULE.LANCHES_SP_CON.close;

   LANCHES_SP_CON;
   LANCHES_LER;
end;

Procedure  TFr_Cardapio.CARDAPIO_LIMPA;
begin
   valor.Text  := '';
end;


procedure TFr_Cardapio.LANCHES_SP_CON;
begin

   with Module.LANCHES_SP_CON do
   begin
      close;
      parambyname('@INP_CODIGO').asinteger := 0;
      execproc;open;first;
   end;

end;


procedure TFr_Cardapio.LANCHES_LER;
begin

   with Module.LANCHES_SP_CON do
   begin
      valor.Text   := FormatFloat('###,##0.00',fieldbyname('LAN_VALORTOTAL' ).asfloat);

      var_imagem   := fieldbyname('LAN_IMAGEM' ).asstring;
      Image1.Picture.Assign(nil);
      if var_imagem <> '' then Image1.Picture.LoadFromFile(var_imagem);
   end;

end;


end.
